<!doctype html><html class="no-js" lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>QtCreator: Qt cross compilation from linux 64 into linux 32, win32, win64 and Mac OS X; upx, usb, dmg, etc</title><link rel="stylesheet" type="text/css" href="http://localhost:4000/assets/css/styles_feeling_responsive_light.css"><link rel="stylesheet" type="text/css" href="http://localhost:4000/assets/css/styles_feeling_responsive.css"> <script src="http://localhost:4000/assets/js/modernizr.min.js"></script> <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script> <script> WebFont.load({ google: { families: [ 'Lato:400,700,400italic:latin', 'Volkhov::latin' ] } }); </script> <noscript><link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic%7CVolkhov' rel='stylesheet' type='text/css'> </noscript><meta name="description" content="The Qt library allows you to make really cross-platform applications. Once written code can be compiled for many operating systems. But the problem is precisely in the word &quot;compile&quot; because it means that it is necessary to reboot to the target system, have a customized development environment, installed and configured zoo of libraries. Cross compilation is a solution - a compilation that produces executable code for a platform different from the one on which it is executed."><link rel="canonical" href="http://localhost:4000/articles/qtcreator-crosscompile/"><meta property="og:title" content="QtCreator: Qt cross compilation from linux 64 into linux 32, win32, win64 and Mac OS X; upx, usb, dmg, etc"><meta property="og:description" content="The Qt library allows you to make really cross-platform applications. Once written code can be compiled for many operating systems. But the problem is precisely in the word &quot;compile&quot; because it means that it is necessary to reboot to the target system, have a customized development environment, installed and configured zoo of libraries. Cross compilation is a solution - a compilation that produces executable code for a platform different from the one on which it is executed."><meta property="og:url" content="http://localhost:4000/articles/qtcreator-crosscompile/"><meta property="og:locale" content="en_EN"><meta property="og:type" content="website"><meta property="og:site_name" content="Arizona Jugger League"><meta property="og:image" content="https://ArizonaJuggerLeague.github.io/images/other/qtc/qtcreator-play.png"><meta property="article:author" content="https://www.facebook.com/Arizona Jugger League"><link type="text/plain" rel="author" href="http://localhost:4000/humans.txt"><link rel="icon" sizes="32x32" href="http://localhost:4000/assets/img/favicon-32x32.png"><link rel="icon" sizes="192x192" href="http://localhost:4000/assets/img/touch-icon-192x192.png"><link rel="apple-touch-icon-precomposed" sizes="180x180" href="http://localhost:4000/assets/img/apple-touch-icon-180x180-precomposed.png"><link rel="apple-touch-icon-precomposed" sizes="152x152" href="http://localhost:4000/assets/img/apple-touch-icon-152x152-precomposed.png"><link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:4000/assets/img/apple-touch-icon-144x144-precomposed.png"><link rel="apple-touch-icon-precomposed" sizes="120x120" href="http://localhost:4000/assets/img/apple-touch-icon-120x120-precomposed.png"><link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://localhost:4000/assets/img/apple-touch-icon-114x114-precomposed.png"><link rel="apple-touch-icon-precomposed" sizes="76x76" href="http://localhost:4000/assets/img/apple-touch-icon-76x76-precomposed.png"><link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://localhost:4000/assets/img/apple-touch-icon-72x72-precomposed.png"><link rel="apple-touch-icon-precomposed" href="http://localhost:4000/assets/img/apple-touch-icon-precomposed.png"><meta name="msapplication-TileImage" content="http://localhost:4000/assets/img/msapplication_tileimage.png"><meta name="msapplication-TileColor" content="#fabb00"><body id="top-of-page" class="post"><div id="navigation" class="sticky"><nav class="top-bar" role="navigation" data-topbar><ul class="title-area"><li class="name"><h1 class="show-for-small-only"><a href="http://localhost:4000" class="icon-tree"> Arizona Jugger League</a></h1><li class="toggle-topbar menu-icon"><a href="#"><span>Navigation</span></a></ul><section class="top-bar-section"><ul class="right"><li class="divider"><li><a href="http://localhost:4000/search/">Search</a></ul><ul class="left"><li><a href="http://localhost:4000/">Home</a><li class="divider"><li class="has-dropdown"> <a href="http://localhost:4000">Tournaments</a><ul class="dropdown"><li><a href="http://localhost:4000/dustbowlmasters/">Dust Bowl Masters</a></ul><li class="divider"><li><a href="http://localhost:4000/aboutjugger/">About Jugger</a><li class="divider"><li><a href="http://localhost:4000/aboutus/">About Us</a><li class="divider"></ul></section></nav></div><div class="row t30"><div class="medium-8 columns medium-offset-2 end"><article itemscope itemtype="http://schema.org/Article"><header><figure> <img src="https://ArizonaJuggerLeague.github.io/images/other/qtc/qtcreator-play.png" width="970" alt="QtCreator: Qt cross compilation from linux 64 into linux 32, win32, win64 and Mac OS X; upx, usb, dmg, etc" itemprop="image"></figure><div itemprop="name"><p class="subheadline">Qt GUI<h1>QtCreator: Qt cross compilation from linux 64 into linux 32, win32, win64 and Mac OS X; upx, usb, dmg, etc</h1></div></header><p class="teaser" itemprop="description"> The Qt library allows you to make really cross-platform applications. Once written code can be compiled for many operating systems. But the problem is precisely in the word "compile" because it means that it is necessary to reboot to the target system, have a customized development environment, installed and configured zoo of libraries. Cross compilation is a solution - a compilation that produces executable code for a platform different from the one on which it is executed.<div itemprop="articleSection"><h3 id="cross-compilation-for-windows-64">Cross compilation for Windows 64</h3><p>Usually one of the most popular problems is the assembly of the Windows version of the application originally developed under Linux. An example of a solution to this problem can be found <a href="http://silmor.de/qtstuff.cross.php">here</a> or <a href="http://qtlinux.narod.ru/make_for_win.htm">in Russian</a>. You need to create a mkspecs configuration, put the Qt files into the appropriate directory and that’s it. Qt compilation is not necessary in this case, you can download the binaries from the official site.<p>This approach has several disadvantages: 1) QtCreator does not know anything about the installed library; 2) There is no official Qt build for Windows x64. You can solve the first problem somehow. But the second one can be solved via compilation only…<p>Do not forget to put directly the cross-compiler itself (it is searched in the package manager by the name “mingw”) before cross-compiling. Download the source codes qt-everywhere from the official site. Copy the win32-g ++ folder to win64-x-g ++ in the mkspecs directory of the unpacked archive. Correct the contents of the qmake.conf file. I got the following:<p class="t30 button radius"><a href="http://localhost:4000/download/qmake-win64.conf">qmake.conf for Windows 64 ›</a><p>In fact, only the paths were replaced in the specification file.<p>I executed <em>configure</em> with the following parameters:<p><code class="language-plaintext highlighter-rouge">./configure -xplatform win64-x-g++ CROSS_COMPILE=x86_64-w64-mingw32- -prefix /usr/local/qt4win64 -no-webkit -no-phonon -no-phonon-backend -no-script -no-scripttools -no-multimedia -no-qt3support -fast -nomake demos -nomake examples -nomake tools -device-option -little-endian -qt-zlib -qt-libpng -qt-libjpeg -openssl-linked -no-fontconfig -no-3dnow -no-ssse3 -continue</code><p>I compile a minimal version of Qt without webkit, phonon, multimedia, etc. For a complete list of options, see the command <em>./configure --help</em><p>The package <em>g++-mingw-w64-x86-64</em> must be installed for such an assembly. It contains <em>x86_64-w64-mingw32-<strong>g++</strong></em> (in the Ubuntu package it should be installed separately).<p>Next, <em>make &amp;&amp; sudo make install</em>. The native system compiler is used at the first stage of compilation. It collects the necessary utilities for Linux, which will be used to build windows-binaries.<p>I have PE32+ DLLs in my <em>/usr/local/qt4win64/bin</em> after installation. And a few ELF 64-bit LSB executables: qmake, uic, moc, rcc. They will be used in QtCreator!<p>Do not delete the unpacked directory after installation as it will be used.<h3 id="cross-compilation-for-windows-32">Cross compilation for Windows 32</h3><p>Similar to compilation for Win64. Except that there is an official assembly, and the library itself does not have to be compiled! It is enough to compile <em>qmake, uic, moc, rcc</em>.<p>configure:<p><code class="language-plaintext highlighter-rouge">./configure -xplatform win32-x-g++ -prefix /usr/local/qt4win32 CROSS_COMPILE=i686-w64-mingw32- -no-webkit -no-phonon -no-phonon-backend -no-script -no-scripttools -no-multimedia -no-qt3support -fast -nomake demos -nomake examples -nomake tools -device-option -little-endian -qt-zlib -qt-libpng -qt-libjpeg -openssl-linked -no-fontconfig -no-3dnow -no-ssse3 -continue</code><p class="t30 button radius"><a href="http://localhost:4000/download/qmake-win32.conf">qmake.conf for Windows 32 ›</a><h3 id="cross-compilation-for-mac-os-x">Cross compilation for Mac OS X</h3><p>Cross-compilation for Mac OS X is also very similar, except that you will need to compile a compiler. I collected according to this <a href="https://github.com/Tatsh/xchain">instruction</a>. It took away a full day of time and a bunch of nerves. You will need a working Mac OS X (at least on a virtual machine) with XCode installed to take necessary files from there. Mac OS X is not needed when compiling your Qt applications.<p>configure:<p><code class="language-plaintext highlighter-rouge">./configure -xplatform macx-x-g++ -prefix /usr/x86_64-apple-darwin11/usr/Qt CROSS_COMPILE=/usr/x86_64-apple-darwin11/usr/bin/x86_64-apple-darwin11- -no-webkit -no-phonon -no-phonon-backend -no-script -no-scripttools -no-multimedia -no-qt3support -fast -nomake demos -nomake examples -nomake tools -device-option -little-endian -qt-zlib -qt-libpng -qt-libjpeg -openssl-linked -no-fontconfig -no-3dnow -no-ssse3 -continue</code><p class="t30 button radius"><a href="http://localhost:4000/download/qmake-macosx.conf">qmake.conf for Mac OS X ›</a><p>Remember that <strong>.a</strong>-files are not needed for linking with a library in Mac OS X.<h3 id="configuring-qtcreator">Configuring QtCreator</h3><p>First, you need to add all installed compilers to the list. Tools - Options - Build and run - Tools:<p><img src="https://ArizonaJuggerLeague.github.io/images/other/qtc/build-and-run.png" alt="QtCreator - Build and run" title="QtCreator - Build and run" /><p>QtCreator normally defines ABI, but it’s better to double-check. You can also notice that the system x64 GCC in Linux can also generate 32-bit applications. However, this does not eliminate the fact that 32-bit versions of libraries are also needed.<p>You can add Qt profiles after compilers:<p><img src="https://ArizonaJuggerLeague.github.io/images/other/qtc/qt-profiles.png" alt="QtCreator - Qt profiles" title="QtCreator - Qt profiles" /><p>The previously collected <em>qmake, uic, moc, rcc</em> will be useful when adding a profile. You need to select a directory with <em>qmake</em>. A yellow icon with an exclamation mark to the left of the profile indicates a warning, but QtCreator can use such a Qt profile. But if the icon is red, then the profile is non-working. This can happen with an incorrect directory structure. Or if you delete the directory in which Qt was compiled.<p>The following settings need to be done for each created project. You must go to the “Projects” tab (Ctrl+5) when the project is active. Then add a specific Qt profile:<p><img src="https://ArizonaJuggerLeague.github.io/images/other/qtc/project-settings.png" alt="QtCreator - Project settings" title="QtCreator - Project settings" /><p>By default, only the Qt system profile is listed in the “Modify Assembly Configuration” list. But there are all Qt profiles in the list of the “Add” button.<p>You need to check the library-compiler pair in the main assembly settings. So that both of them were from the same operating system.<p>QtCreator defaults to the build steps “qmake” and “Build”. I manually added the special stages “upx” and “dmgbuild” for my project. The “upx” stage is executed every time you click the “Build project” button. However, if the executable file has not been modified then upx will return an error. It means that the file has already been processed. In the error triggered, the next step will not be called, i.e. the dmg file will only be updated if upx has worked.<p>“<em>Upx</em>” tool must be installed on the system for the “upx” stage to work. However, even working in Linux-environment upx can compress applications for: linux32/64, win32, macos32/64. Upx-compression is really needed not for all projects; the stage is shown rather for an example.<p>For the “dmgbuild” stage, I used the <a href="http://confluence.concord.org/display/CCTR/Creating+MacOS+dmg+files+in+Linux">make_dmg script</a>. It needs root privileges so you need to add the script to the <em>/etc/sudoers</em> file.<h3 id="changes-to-the-project-file-to-use-of-third-party-libraries">Changes to the project file to use of third-party libraries</h3><p>My project uses <em>libusb</em>, this is not part of Qt. It was also necessary to include a platform-dependent implementation of the HID. The following lines were added to the project file:<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>macx {
    INCLUDEPATH += $$PWD/libusbx/
    SOURCES += BootLoader/HIDAPI/mac/hid.c
    LIBS += -framework IOKit -framework CoreFoundation -lusb-1.0
    ICON = AqPicFlash.icns
}

win32: {
    INCLUDEPATH += $$PWD/libusbx/
    LIBS += -lsetupapi -lole32
    SOURCES += BootLoader/HIDAPI/windows/hid.cpp
    RC_FILE = WinIcon.rc
}

win32: !win64-x-g++ {
    LIBS += -L$$PWD/libusbx/ -lusb-1.0-32.dll
}

win64-x-g++ {
    LIBS += -L$$PWD/libusbx/ -lusb-1.0-64.dll
}

unix: !macx {
    CONFIG += link_pkgconfig
    PKGCONFIG += libusb-1.0
    SOURCES += BootLoader/HIDAPI/linux/hid-libusb.c
}
</code></pre></div></div><p>We link to the system <em>libusb</em> on Mac OS X and Linux. On Windows depending on the bit depth we can link to <em>libusb-1.0-32.dll.a</em> or <em>libusb-1.0-64.dll.a</em>. Remember that <strong>.a</strong>-file can be renamed, but the application will still depend on <em>libusb-1.0.dll</em>. We take parameters for libusb through the system utility <em>pkgconfig</em> in Linux. We include all necessary system libraries and icons in addition to libusb.<p>It is convenient to distribute the resulting files for different operating systems by directories. You can do it like this:<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>macx {
    DESTDIR = mac
    OBJECTS_DIR = mac
    MOC_DIR = mac
    UI_DIR = mac
    RCC_DIR = mac
}

unix: !macx {
    DESTDIR = linux
    OBJECTS_DIR = linux
    MOC_DIR = linux
    UI_DIR = linux
    RCC_DIR = linux
}

win32 {
    DESTDIR = windows/release
    OBJECTS_DIR = windows
    MOC_DIR = windows
    UI_DIR = windows
    RCC_DIR = windows
}

win64-x-g++ {
    DESTDIR = win64/release
    OBJECTS_DIR = win64
    MOC_DIR = win64
    UI_DIR = win64
    RCC_DIR = win64
}
</code></pre></div></div><p>The <em>win64-x-g++</em> target is for <em>win32</em>. But it is the last one in the project file, so it overwrites the settings.<h3 id="result">Result</h3><p>It is enough to choose the type of assembly (as shown in the very first screenshot) and click “Build project” to compile the application for this or that operating system.<p class="t30 button radius"><a href="https://habrahabr.ru/post/198142/">This article in Russian ›</a><h2 class="t60" id="other-articles">Other Articles</h2><ul class="side-nav"><li><a href="http://localhost:4000/articles/civetwebview/">GUI &middot; <strong>Tiny desktop GUI application in PHP - 2 MB is enough</strong></a><li><a href="http://localhost:4000/articles/best-nintendo-switch-games/">Gaming &middot; <strong>Best Nintendo Switch games</strong></a><li><a href="http://localhost:4000/articles/nuklear-cross/">GUI &middot; <strong>Nuklear+ — tiny crossplatform GUI</strong></a><li><a href="http://localhost:4000/articles/advanced-jekyll/">Static site creation &middot; <strong>Advanced Jekyll</strong></a><li><a href="http://localhost:4000/articles/read-tar-in-26-lines/">Low level programming &middot; <strong>Read TAR-file in 26 lines of Ansi-C code</strong></a></ul></div><div id="page-meta" class="t30"><p> <time class="icon-calendar pr20" datetime="2013-10-18T00:00:00-07:00" itemprop="datePublished"> 2013-10-18</time> <span class="icon-archive pr20"> ARTICLES</span> <br /> <span class="pr20"><span class="icon-price-tag pr10"> articles</span> <span class="icon-price-tag pr10"> linux</span> <span class="icon-price-tag pr10"> windows</span> <span class="icon-price-tag pr10"> mac os x</span> <span class="icon-price-tag pr10"> qt</span> <span class="icon-price-tag pr10"> c++</span> </span><div id="post-nav" class="row"><div class="small-5 columns"><a class="button small radius prev" href="http://localhost:4000/tools/aqpicflash/">&laquo; AqPicFlash</a></div><div class="small-2 columns text-center"><a class="radius button small" href="http://localhost:4000/blog/archive/" title="Blog Archive">Archive</a></div><div class="small-5 columns text-right"><a class="button small radius next" href="http://localhost:4000/articles/eink-android/">What else you can do on E-ink book with Android &raquo;</a></div></div></div><section class="comments"><div class="constrain--body"><h2 class="comments__heading heading-2">Leave a comment</h2><form id="post-new-comment" class="form" action="https://api.staticman.net/v2/entry/DeXP/dexp.github.io/master/comments" method="post"> <input type="hidden" name="options[slug]" value="articles-qtcreator-crosscompile"> <input type="hidden" name="options[parent]" value="articles-qtcreator-crosscompile"> <input type="hidden" name="options[origin]" value="http://localhost:4000/articles/qtcreator-crosscompile/"> <input type="hidden" name="options[redirect]" value="http://localhost:4000/articles/qtcreator-crosscompile/"> <input type="text" name="company" class="text-field" style="display: none"> <input class="form__field text-field" type="text" name="fields[name]" placeholder="Name" required/> <input class="form__field text-field" type="email" name="fields[email]" placeholder="Email address (will not be public; for avatar only)" required/> <input class="form__field text-field" type="url" name="fields[url]" placeholder="Website (optional)"/> <input class="form__field text-field" type="address" name="fields[address]" placeholder="Address (do not fill!)" style="display: none"/> <textarea class="form__field text-field" rows="10" name="fields[message]" placeholder="Comment. Markdown is accepted." required></textarea> <input class="large radius button" type="submit" value="Send" /> (after comment you will be redirected back here) </form></div></section></article></div></div><div id="up-to-top" class="row"><div class="small-12 columns" style="text-align: right;"> <a class="fontel-16 icon-chevron_up" href="#top-of-page"></a></div></div><footer id="footer-content" class="bg-grau"><div id="footer"><div class="row"><div class="medium-6 large-5 columns"><h5 class="shadow-black">About This Site</h5><p class="shadow-black"> This is the home of the Arizona Jugger League, LLC. We strive to create fun, competitive Jugger tournaments! <a href="http://localhost:4000/about/">More ›</a></div><div class="small-6 medium-3 large-3 large-offset-1 columns"><h5 class="shadow-black">Services</h5><ul class="no-bullet shadow-black"><li > <a href="http://localhost:4000" title=""></a><li > <a href="http://localhost:4000/feed.xml" title="Subscribe to RSS Feed">RSS</a><li > <a href="http://localhost:4000/atom.xml" title="Subscribe to Atom Feed">Atom</a><li > <a href="http://localhost:4000/sitemap.xml" title="Sitemap for Google Webmaster Tools">sitemap.xml</a></ul></div><div class="small-6 medium-3 large-3 columns"><h5 class="shadow-black">Useful links</h5><ul class="no-bullet shadow-black"><li > <a href="http://localhost:4000" title=""></a><li class="rss-link" > <a href="http://phlow.de/" target="_blank" title="Theme author">Phlow</a><li class="sitemap-link" > <a href="http://phlow.github.io/feeling-responsive/" target="_blank" title="Theme link">Feeling Responsive</a><li class="services-newsletter" > <a href="http://foundation.zurb.com/" target="_blank" title="Built on Foundation">Built on Foundation</a></ul></div></div></div><div id="subfooter"><nav class="row"><section id="subfooter-left" class="small-12 medium-6 columns credits"><p>© Arizona Jugger League, LLC (2025)</section><section id="subfooter-right" class="small-12 medium-6 columns"><ul class="inline-list social-icons"><li><a href="http://github.com/dexp" target="_blank" class="icon-github_alt" title="GitHub"></a><li><a href="https://www.linkedin.com/in/dexperix/" target="_blank" class="icon-linkedin" title="LinkedIn"></a><li><a href="http://steamcommunity.com/id/dexp" target="_blank" class="icon-steam" title="Steam"></a><li><a href="https://vk.com/dexperix" target="_blank" class="icon-vk" title="VKontakte"></a><li><a href="https://www.facebook.com/dexperix" target="_blank" class="icon-facebook" title="Facebook"></a><li><a href="skype:dexperix?chat" target="_blank" class="icon-skype" title="Skype"></a><li><a href="https://t.me/DeXPeriX" target="_blank" class="icon-telegram" title="Telegram"></a></ul></section></nav></div></footer><script src="http://localhost:4000/assets/js/javascript.min.js"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-103240598-1', 'auto'); ga('set', 'anonymizeIp', true); ga('send', 'pageview'); </script>
