<!doctype html><html class="no-js" lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Nuklear — ideal GUI for tiny projects?</title><link rel="stylesheet" type="text/css" href="http://localhost:4000/assets/css/styles_feeling_responsive_light.css"><link rel="stylesheet" type="text/css" href="http://localhost:4000/assets/css/styles_feeling_responsive.css"> <script src="http://localhost:4000/assets/js/modernizr.min.js"></script> <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script> <script> WebFont.load({ google: { families: [ 'Lato:400,700,400italic:latin', 'Volkhov::latin' ] } }); </script> <noscript><link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic%7CVolkhov' rel='stylesheet' type='text/css'> </noscript><meta name="description" content="Nuklear is a library for creating immediate mode user interfaces. The library does not have any dependencies (C89 only! Only hardcore!). But also does not know how to create operating system windows or perform real rendering. Nuklear is an embedded library that provides user-friendly interfaces for rendering by implemented application. There are examples on WinAPI, X11, SDL, Allegro, GLFW, OpenGL, DirectX. The parent of the concept was the ImGUI library."><link rel="canonical" href="http://localhost:4000/articles/nuklear-intro/"><meta property="og:title" content="Nuklear — ideal GUI for tiny projects?"><meta property="og:description" content="Nuklear is a library for creating immediate mode user interfaces. The library does not have any dependencies (C89 only! Only hardcore!). But also does not know how to create operating system windows or perform real rendering. Nuklear is an embedded library that provides user-friendly interfaces for rendering by implemented application. There are examples on WinAPI, X11, SDL, Allegro, GLFW, OpenGL, DirectX. The parent of the concept was the ImGUI library."><meta property="og:url" content="http://localhost:4000/articles/nuklear-intro/"><meta property="og:locale" content="en_EN"><meta property="og:type" content="website"><meta property="og:site_name" content="Arizona Jugger League"><meta property="article:author" content="https://www.facebook.com/Arizona Jugger League"><link type="text/plain" rel="author" href="http://localhost:4000/humans.txt"><link rel="icon" sizes="32x32" href="http://localhost:4000/assets/img/favicon-32x32.png"><link rel="icon" sizes="192x192" href="http://localhost:4000/assets/img/touch-icon-192x192.png"><link rel="apple-touch-icon-precomposed" sizes="180x180" href="http://localhost:4000/assets/img/apple-touch-icon-180x180-precomposed.png"><link rel="apple-touch-icon-precomposed" sizes="152x152" href="http://localhost:4000/assets/img/apple-touch-icon-152x152-precomposed.png"><link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:4000/assets/img/apple-touch-icon-144x144-precomposed.png"><link rel="apple-touch-icon-precomposed" sizes="120x120" href="http://localhost:4000/assets/img/apple-touch-icon-120x120-precomposed.png"><link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://localhost:4000/assets/img/apple-touch-icon-114x114-precomposed.png"><link rel="apple-touch-icon-precomposed" sizes="76x76" href="http://localhost:4000/assets/img/apple-touch-icon-76x76-precomposed.png"><link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://localhost:4000/assets/img/apple-touch-icon-72x72-precomposed.png"><link rel="apple-touch-icon-precomposed" href="http://localhost:4000/assets/img/apple-touch-icon-precomposed.png"><meta name="msapplication-TileImage" content="http://localhost:4000/assets/img/msapplication_tileimage.png"><meta name="msapplication-TileColor" content="#fabb00"><body id="top-of-page" class="post"><div id="navigation" class="sticky"><nav class="top-bar" role="navigation" data-topbar><ul class="title-area"><li class="name"><h1 class="show-for-small-only"><a href="http://localhost:4000" class="icon-tree"> Arizona Jugger League</a></h1><li class="toggle-topbar menu-icon"><a href="#"><span>Navigation</span></a></ul><section class="top-bar-section"><ul class="right"><li class="divider"><li><a href="http://localhost:4000/search/">Search</a><li class="divider"><li><a href="http://localhost:4000/about/">About</a></ul><ul class="left"><li><a href="http://localhost:4000/">DeXP</a><li class="divider"><li><a href="http://localhost:4000/games/">Games</a><li class="divider"><li><a href="http://localhost:4000/tools/">Tools</a><li class="divider"><li><a href="http://localhost:4000/sites/">Sites</a><li class="divider"><li><a href="http://localhost:4000/articles/">Articles</a><li class="divider"><li><a href="http://localhost:4000/photo/">Photo</a><li class="divider"><li><a href="http://localhost:4000/russian/">Russian</a><li class="divider"><li class="has-dropdown"> <a href="http://localhost:4000/blog/">Blog</a><ul class="dropdown"><li><a href="http://localhost:4000/blog/archive/">Blog Archive</a></ul><li class="divider"></ul></section></nav></div><div id="masthead"><div class="row"><div class="small-12 columns"> <a id="logo" href="http://localhost:4000/" title="Arizona Jugger League – Arizona Jugger League"> <img src="http://localhost:4000/assets/img/logo.png" alt="Arizona Jugger League – Arizona Jugger League"> </a></div></div></div><div class="row t30"><div class="medium-8 columns medium-offset-2 end"><article itemscope itemtype="http://schema.org/Article"><header><div itemprop="name"><p class="subheadline">GUI<h1>Nuklear — ideal GUI for tiny projects?</h1></div></header><p class="teaser" itemprop="description"> Nuklear is a library for creating immediate mode user interfaces. The library does not have any dependencies (C89 only! Only hardcore!). But also does not know how to create operating system windows or perform real rendering. Nuklear is an embedded library that provides user-friendly interfaces for rendering by implemented application. There are examples on WinAPI, X11, SDL, Allegro, GLFW, OpenGL, DirectX. The parent of the concept was the <a href='https://github.com/ocornut/imgui'>ImGUI</a> library.<div itemprop="articleSection"><p><a href="https://dexp.github.io/nuklear-webdemo/"><img src="/images/other/nk/start-demo.png" alt="Nuklear simpliest demo" title="Nuklear simpliest demo" class="left" /></a><p>Is Nuklear something specific? It has a small size (about 15 thousand lines of code), is fully contained in one header file, was created with an emphasis on portability and ease of use. Public Domain license.<p class="t30 button radius"><a href="https://dexp.github.io/nuklear-webdemo/">Nuklear webdemo ›</a><h3 id="formulation-of-the-problem">Formulation of the problem</h3><p>I often have problems to solve which I have to write small utilities in several hundred lines of code. Usually, the result is a console application, which no one can really use except me. Can a simple GUI make these utilities more convenient?<p>The requirements to the result:<ol><li>Small size, up to hundreds of kilobytes.<li>Cross-platform, to begin with, at least Windows and Linux.<li>No dependency on external libraries in Windows, everything should be in one EXE file.<li>A decent/beautiful appearance.<li>Support images in JPG and PNG formats.<li>Ease of development, the ability to develop in Windows and Linux.</ol><p>Will Nuklear succeed?<p><img src="/images/other/nk/node-edit.png" alt="Nuklear node edit example" title="Nuklear node edit example" /><p>For example, let’s look at the creation of the utility <a href="http://localhost:4000/tools/dxbin2h/">dxBin2h</a> - it reads the file byte by byte and writes it as a C-array. The program has some sorts of “buns”, such as removing unnecessary characters etc. Usually, small utilities are created for the sake of a third-party functionality… For example, dxBin2h was created for <a href="http://localhost:4000/games/winternovel/">Winter Novel</a>, for preprocessing ASCII files.<h3 id="ease-of-development-cross-platform">Ease of development, cross-platform</h3><p><img src="/images/other/nk/gwen-skin.png" alt="Nuklear gwen skin" title="Nuklear gwen skin" class="right" /><p>There should not exist any problems with the simplicity of development, should there? After all, the library was created with a focus on the simplicity. You can find simple example directly in Readme on GitHub. Absolutely clear and concise 20 lines of code give a beautiful and clear result.<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/* init gui state */</span>
<span class="k">struct</span> <span class="n">nk_context</span> <span class="n">ctx</span><span class="p">;</span>
<span class="n">nk_init_fixed</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ctx</span><span class="p">,</span> <span class="n">calloc</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">MAX_MEMORY</span><span class="p">),</span> <span class="n">MAX_MEMORY</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">font</span><span class="p">);</span>

<span class="k">enum</span> <span class="p">{</span><span class="n">EASY</span><span class="p">,</span> <span class="n">HARD</span><span class="p">};</span>
<span class="kt">int</span> <span class="n">op</span> <span class="o">=</span> <span class="n">EASY</span><span class="p">;</span>
<span class="kt">float</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">0</span><span class="p">.</span><span class="mi">6</span><span class="n">f</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">i</span> <span class="o">=</span>  <span class="mi">20</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="n">nk_begin</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ctx</span><span class="p">,</span> <span class="s">"Show"</span><span class="p">,</span> <span class="n">nk_rect</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">220</span><span class="p">,</span> <span class="mi">220</span><span class="p">),</span>
    <span class="n">NK_WINDOW_BORDER</span><span class="o">|</span><span class="n">NK_WINDOW_MOVABLE</span><span class="o">|</span><span class="n">NK_WINDOW_CLOSABLE</span><span class="p">))</span> <span class="p">{</span>
    <span class="cm">/* fixed widget pixel width */</span>
    <span class="n">nk_layout_row_static</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">nk_button_label</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ctx</span><span class="p">,</span> <span class="s">"button"</span><span class="p">))</span> <span class="p">{</span>
        <span class="cm">/* event handling */</span>
    <span class="p">}</span>

    <span class="cm">/* fixed widget window ratio width */</span>
    <span class="n">nk_layout_row_dynamic</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">nk_option_label</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ctx</span><span class="p">,</span> <span class="s">"easy"</span><span class="p">,</span> <span class="n">op</span> <span class="o">==</span> <span class="n">EASY</span><span class="p">))</span> <span class="n">op</span> <span class="o">=</span> <span class="n">EASY</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">nk_option_label</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ctx</span><span class="p">,</span> <span class="s">"hard"</span><span class="p">,</span> <span class="n">op</span> <span class="o">==</span> <span class="n">HARD</span><span class="p">))</span> <span class="n">op</span> <span class="o">=</span> <span class="n">HARD</span><span class="p">;</span>

    <span class="cm">/* custom widget pixel width */</span>
    <span class="n">nk_layout_row_begin</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ctx</span><span class="p">,</span> <span class="n">NK_STATIC</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
    <span class="p">{</span>
        <span class="n">nk_layout_row_push</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">50</span><span class="p">);</span>
        <span class="n">nk_label</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ctx</span><span class="p">,</span> <span class="s">"Volume:"</span><span class="p">,</span> <span class="n">NK_TEXT_LEFT</span><span class="p">);</span>
        <span class="n">nk_layout_row_push</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">110</span><span class="p">);</span>
        <span class="n">nk_slider_float</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">value</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="n">f</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">1</span><span class="n">f</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">nk_layout_row_end</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ctx</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">nk_end</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ctx</span><span class="p">);</span>
</code></pre></div></div><p>But not everything is so simple. The GUI calculation part is really simple. But there must be a renderer too. Go to the <a href="https://github.com/vurtun/nuklear/tree/master/demo">demo</a> folder, choose the one you like. I’m sure it will not be exactly 20 lines, not even 200. Moreover, all examples draw approximately the same result, but the code is significantly different because of the render.<p>Example of WinAPI initialization for Nuklear:<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">static</span> <span class="n">LRESULT</span> <span class="n">CALLBACK</span>
<span class="nf">WindowProc</span><span class="p">(</span><span class="n">HWND</span> <span class="n">wnd</span><span class="p">,</span> <span class="n">UINT</span> <span class="n">msg</span><span class="p">,</span> <span class="n">WPARAM</span> <span class="n">wparam</span><span class="p">,</span> <span class="n">LPARAM</span> <span class="n">lparam</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">switch</span> <span class="p">(</span><span class="n">msg</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="n">WM_DESTROY</span><span class="p">:</span>
        <span class="n">PostQuitMessage</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">nk_gdip_handle_event</span><span class="p">(</span><span class="n">wnd</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">wparam</span><span class="p">,</span> <span class="n">lparam</span><span class="p">))</span>
        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">DefWindowProcW</span><span class="p">(</span><span class="n">wnd</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">wparam</span><span class="p">,</span> <span class="n">lparam</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">GdipFont</span><span class="o">*</span> <span class="n">font</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">nk_context</span> <span class="o">*</span><span class="n">ctx</span><span class="p">;</span>

    <span class="n">WNDCLASSW</span> <span class="n">wc</span><span class="p">;</span>
    <span class="n">RECT</span> <span class="n">rect</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">WINDOW_WIDTH</span><span class="p">,</span> <span class="n">WINDOW_HEIGHT</span> <span class="p">};</span>
    <span class="n">DWORD</span> <span class="n">style</span> <span class="o">=</span> <span class="n">WS_OVERLAPPEDWINDOW</span><span class="p">;</span>
    <span class="n">DWORD</span> <span class="n">exstyle</span> <span class="o">=</span> <span class="n">WS_EX_APPWINDOW</span><span class="p">;</span>
    <span class="n">HWND</span> <span class="n">wnd</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">running</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">needs_refresh</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

    <span class="cm">/* Win32 */</span>
    <span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">wc</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">wc</span><span class="p">));</span>
    <span class="n">wc</span><span class="p">.</span><span class="n">lpfnWndProc</span> <span class="o">=</span> <span class="n">WindowProc</span><span class="p">;</span>
    <span class="n">wc</span><span class="p">.</span><span class="n">hInstance</span> <span class="o">=</span> <span class="n">GetModuleHandleW</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
    <span class="n">wc</span><span class="p">.</span><span class="n">hIcon</span> <span class="o">=</span> <span class="n">LoadIcon</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="n">IDI_APPLICATION</span><span class="p">);</span>
    <span class="n">wc</span><span class="p">.</span><span class="n">hCursor</span> <span class="o">=</span> <span class="n">LoadCursor</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="n">IDC_ARROW</span><span class="p">);</span>
    <span class="n">wc</span><span class="p">.</span><span class="n">lpszClassName</span> <span class="o">=</span> <span class="s">L"NuklearWindowClass"</span><span class="p">;</span>
    <span class="n">RegisterClassW</span><span class="p">(</span><span class="o">&amp;</span><span class="n">wc</span><span class="p">);</span>

    <span class="n">AdjustWindowRectEx</span><span class="p">(</span><span class="o">&amp;</span><span class="n">rect</span><span class="p">,</span> <span class="n">style</span><span class="p">,</span> <span class="n">FALSE</span><span class="p">,</span> <span class="n">exstyle</span><span class="p">);</span>

    <span class="n">wnd</span> <span class="o">=</span> <span class="n">CreateWindowExW</span><span class="p">(</span><span class="n">exstyle</span><span class="p">,</span> <span class="n">wc</span><span class="p">.</span><span class="n">lpszClassName</span><span class="p">,</span> <span class="s">L"Nuklear Demo"</span><span class="p">,</span>
        <span class="n">style</span> <span class="o">|</span> <span class="n">WS_VISIBLE</span><span class="p">,</span> <span class="n">CW_USEDEFAULT</span><span class="p">,</span> <span class="n">CW_USEDEFAULT</span><span class="p">,</span>
        <span class="n">rect</span><span class="p">.</span><span class="n">right</span> <span class="o">-</span> <span class="n">rect</span><span class="p">.</span><span class="n">left</span><span class="p">,</span> <span class="n">rect</span><span class="p">.</span><span class="n">bottom</span> <span class="o">-</span> <span class="n">rect</span><span class="p">.</span><span class="n">top</span><span class="p">,</span>
        <span class="nb">NULL</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">wc</span><span class="p">.</span><span class="n">hInstance</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
</code></pre></div></div><p>Example of SDL initialization:<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span>
<span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
    <span class="cm">/* Platform */</span>
    <span class="n">SDL_Window</span> <span class="o">*</span><span class="n">win</span><span class="p">;</span>
    <span class="n">SDL_GLContext</span> <span class="n">glContext</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">nk_color</span> <span class="n">background</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">win_width</span><span class="p">,</span> <span class="n">win_height</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">running</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

    <span class="cm">/* GUI */</span>
    <span class="k">struct</span> <span class="n">nk_context</span> <span class="o">*</span><span class="n">ctx</span><span class="p">;</span>

    <span class="cm">/* SDL setup */</span>
    <span class="n">SDL_SetHint</span><span class="p">(</span><span class="n">SDL_HINT_VIDEO_HIGHDPI_DISABLED</span><span class="p">,</span> <span class="s">"0"</span><span class="p">);</span>
    <span class="n">SDL_Init</span><span class="p">(</span><span class="n">SDL_INIT_VIDEO</span><span class="p">);</span>
    <span class="n">SDL_GL_SetAttribute</span><span class="p">(</span><span class="n">SDL_GL_DOUBLEBUFFER</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="n">SDL_GL_SetAttribute</span><span class="p">(</span><span class="n">SDL_GL_DEPTH_SIZE</span><span class="p">,</span> <span class="mi">24</span><span class="p">);</span>
    <span class="n">SDL_GL_SetAttribute</span><span class="p">(</span><span class="n">SDL_GL_STENCIL_SIZE</span><span class="p">,</span> <span class="mi">8</span><span class="p">);</span>
    <span class="n">SDL_GL_SetAttribute</span><span class="p">(</span><span class="n">SDL_GL_CONTEXT_MAJOR_VERSION</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
    <span class="n">SDL_GL_SetAttribute</span><span class="p">(</span><span class="n">SDL_GL_CONTEXT_MINOR_VERSION</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
    <span class="n">win</span> <span class="o">=</span> <span class="n">SDL_CreateWindow</span><span class="p">(</span><span class="s">"Demo"</span><span class="p">,</span>
        <span class="n">SDL_WINDOWPOS_CENTERED</span><span class="p">,</span> <span class="n">SDL_WINDOWPOS_CENTERED</span><span class="p">,</span>
        <span class="n">WINDOW_WIDTH</span><span class="p">,</span> <span class="n">WINDOW_HEIGHT</span><span class="p">,</span> <span class="n">SDL_WINDOW_OPENGL</span>
        <span class="o">|</span><span class="n">SDL_WINDOW_SHOWN</span><span class="o">|</span><span class="n">SDL_WINDOW_ALLOW_HIGHDPI</span><span class="p">);</span>
    <span class="n">glContext</span> <span class="o">=</span> <span class="n">SDL_GL_CreateContext</span><span class="p">(</span><span class="n">win</span><span class="p">);</span>
    <span class="n">SDL_GetWindowSize</span><span class="p">(</span><span class="n">win</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">win_width</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">win_height</span><span class="p">);</span>
</code></pre></div></div><h3 id="no-dependencies-in-windows">No dependencies in Windows</h3><p>Well, let’s take the SDL2 with OpenGL renderer and get the resulting application for Windows, Linux, Mac OS X, Android, iOS etc! All is super. The only problem here is that SDL is not presented in standard Windows. So you have to drag along with you. This violates the first requirement (small size), because the SDL itself weighs about a megabyte.<p>But in the examples you can see GDI+, which is in Windows starting with XP. GDI+ can TTF-fonts, PNG and JPG pictures, load resources from memory. So there will be 2 possible renderers: GDI+ for Windows and SDL for all other cases. You can place a piece of rendering-dependent code into a separate C-file (<a href="https://github.com/DeXP/dxBin2h/blob/master/GUI/nuklear_cross.c">nuklear_cross.c</a>). Then the main code will not be overloaded and it will be possible to focus on the interface, which greatly simplifies development. An additional advantage is compilation acceleration - Nuklear will be compiled into a separate object file which will rarely change.<p>Windows, GDI+ renderer, Arial 12pt font:<p><img src="/images/other/nk/b1-win.png" alt="dxBin2h, Windows, GDI+ renderer, Arial 12pt" title="dxBin2h, Windows, GDI+ renderer, Arial 12pt" /><p>Linux, SDL2 with OpenGL renderer, default font:<p><img src="/images/other/nk/b1-lin.png" alt="dxBin2h, Linux, SDL2 with OpenGL renderer, default font" title="dxBin2h, Linux, SDL2 with OpenGL renderer, default font" /><p>The application looks very different! And the first thing that catches your eye is the font.<h3 id="font">Font</h3><p>You need to use the same font to make the application look the same on all operating systems. It would be great to take any system font which is guaranteed to be everywhere. But there is no such a font. Therefore, the font must be included in the application. Ttf-fonts usually occupy hundreds of kilobytes. But you can create subsets with the necessary symbols only. <a href="https://www.fontsquirrel.com/tools/webfont-generator">FontSquirrel web service</a> is a good start. DejaVu Serif was stuck up to 40kb, although it contains Cyrillic, Polish and a whole bunch of languages.<p>Everything would be fine, but GDI+ driver for Nuklear could not load a font from memory, only from a file. I had <a href="https://github.com/vurtun/nuklear/pull/318">to correct</a>… By the way, you can include the font into your application with the <a href="http://localhost:4000/tools/dxbin2h/">dxBin2h</a>.<p>Windows, DejaVu Serif:<p><img src="/images/other/nk/b2-win.png" alt="dxBin2h, Windows, DejaVu Serif" title="dxBin2h, Windows, DejaVu Serif" /><p>Linux, DejaVu Serif:<p><img src="/images/other/nk/b2-lin.png" alt="dxBin2h, Linux, DejaVu Serif" title="dxBin2h, Linux, DejaVu Serif" /><p>It’s much better. But I do not like the look of the checkboxes. And I would like to see pictures.<h3 id="pictures-png-jpg">Pictures: PNG, JPG</h3><p><img src="/images/other/nk/nk-img.png" alt="Nuklear displays images" title="Nuklear displays images" class="right" /><p>Both SDL2 and GDI+ are able to load pictures. But there is an additional dependency for SDL when loading JPG and PNG - SDL_image. It is pretty simple to get rid of: use <a href="https://github.com/nothings/stb">stb_image.h</a> if the project is compiling with SDL.<p>Not everything was good with GDI+ either. Namely, the GDI+ driver for Nuklear was not able to render images using GDI+. I had to implement it myself (<a href="https://github.com/vurtun/nuklear/pull/316">Pull Request</a>). Now everything is fixed and the code is in the official repository.<p>The code for loading the image via stb_image for OpenGL:<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">struct</span> <span class="n">nk_image</span> <span class="nf">dxNkLoadImageFromMem</span><span class="p">(</span><span class="k">const</span> <span class="kt">void</span><span class="o">*</span> <span class="n">buf</span><span class="p">,</span> <span class="kt">int</span> <span class="n">bufSize</span><span class="p">){</span>
        <span class="kt">int</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">n</span><span class="p">;</span>
        <span class="n">GLuint</span> <span class="n">tex</span><span class="p">;</span>
        <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">data</span> <span class="o">=</span> <span class="n">stbi_load_from_memory</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="n">bufSize</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">x</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">y</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">n</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="n">glGenTextures</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">tex</span><span class="p">);</span>
        <span class="n">glBindTexture</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span> <span class="n">tex</span><span class="p">);</span>
        <span class="n">glTexParameterf</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span> <span class="n">GL_TEXTURE_MIN_FILTER</span><span class="p">,</span> <span class="n">GL_LINEAR_MIPMAP_NEAREST</span><span class="p">);</span>
        <span class="n">glTexParameterf</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span> <span class="n">GL_TEXTURE_MAG_FILTER</span><span class="p">,</span> <span class="n">GL_LINEAR_MIPMAP_NEAREST</span><span class="p">);</span>
        <span class="n">glTexParameterf</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span> <span class="n">GL_TEXTURE_WRAP_S</span><span class="p">,</span> <span class="n">GL_CLAMP_TO_EDGE</span><span class="p">);</span>
        <span class="n">glTexParameterf</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span> <span class="n">GL_TEXTURE_WRAP_T</span><span class="p">,</span> <span class="n">GL_CLAMP_TO_EDGE</span><span class="p">);</span>
        <span class="n">glTexImage2D</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">GL_RGBA8</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">GL_RGBA</span><span class="p">,</span> <span class="n">GL_UNSIGNED_BYTE</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>
        <span class="n">glGenerateMipmap</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">nk_image_id</span><span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">tex</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div><h3 id="appearance-of-the-application">Appearance of the application</h3><p>There is a mechanism for setting styles in Nuklear to change the look of the check boxes. Enabled and disabled check boxes are separate PNG images. The red theme from Nuklear examples (<a href="https://github.com/vurtun/nuklear/blob/master/demo/style.c">style.c</a> file) is set:<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">nk_image</span> <span class="n">checked</span> <span class="o">=</span> <span class="n">dxNkLoadImageFromMem</span><span class="p">(</span> 
                       <span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span><span class="n">checked_image</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">checked_image</span><span class="p">)</span> <span class="p">);</span>
    <span class="n">nk_image</span> <span class="n">unchecked</span> <span class="o">=</span> <span class="n">dxNkLoadImageFromMem</span><span class="p">(</span>
                      <span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span><span class="n">unchecked_image</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">unchecked_image</span><span class="p">)</span> <span class="p">);</span>

    <span class="n">set_style</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">THEME_RED</span><span class="p">);</span>
    <span class="p">{</span><span class="k">struct</span> <span class="n">nk_style_toggle</span> <span class="o">*</span><span class="n">toggle</span><span class="p">;</span>
        <span class="n">toggle</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">style</span><span class="p">.</span><span class="n">checkbox</span><span class="p">;</span>
        <span class="n">toggle</span><span class="o">-&gt;</span><span class="n">border</span> <span class="o">=</span> <span class="o">-</span><span class="mi">2</span><span class="p">;</span> <span class="cm">/* cursor must overlap original image */</span>
        <span class="n">toggle</span><span class="o">-&gt;</span><span class="n">normal</span>          <span class="o">=</span> <span class="n">nk_style_item_image</span><span class="p">(</span><span class="n">unchecked</span><span class="p">);</span>
        <span class="n">toggle</span><span class="o">-&gt;</span><span class="n">hover</span>           <span class="o">=</span> <span class="n">nk_style_item_image</span><span class="p">(</span><span class="n">unchecked</span><span class="p">);</span>
        <span class="n">toggle</span><span class="o">-&gt;</span><span class="n">active</span>          <span class="o">=</span> <span class="n">nk_style_item_image</span><span class="p">(</span><span class="n">unchecked</span><span class="p">);</span>
        <span class="n">toggle</span><span class="o">-&gt;</span><span class="n">cursor_normal</span>   <span class="o">=</span> <span class="n">nk_style_item_image</span><span class="p">(</span><span class="n">checked</span><span class="p">);</span>
        <span class="n">toggle</span><span class="o">-&gt;</span><span class="n">cursor_hover</span>    <span class="o">=</span> <span class="n">nk_style_item_image</span><span class="p">(</span><span class="n">checked</span><span class="p">);</span>
    <span class="p">}</span>
</code></pre></div></div><p>The application in Windows looks like this:<p><img src="/images/other/nk/b3-win.png" alt="dxBin2h, Windows, skinned" title="dxBin2h, Windows, skinned" /><p>Linux:<p><img src="/images/other/nk/b3-lin.png" alt="dxBin2h, Linux, skinned" title="dxBin2h, Linux, skinned" /><h3 id="whats-in-the-end">What’s in the end?</h3><ul><li>Windows EXE 200 kb after compiling, 90kb after UPX. The application size in Linux is 100kb larger because of the stb_image.<li>Runs correctly on Windows and Linux.<li>Font and pictures are stored as arrays in the application memory. No dependencies not from WinAPI in Windows.<li>The engine changes the style of the application.<li>PNG and JPG are loaded with GDI+ and stb_image.<li>All the “dirty” platform-dependent code is in a separate file. The developer focuses on creating an application.</ul><h3 id="known-issues">Known Issues</h3><ul><li>Different font smoothing in different operating systems<li>Different checkbox sizes<li>Different support for images (when using stb_image you need to avoid problematic images)<li>Not full support for Unicode with a truncated font<li>There is no example on the technologies of Mac OS X</ul><h3 id="how-to-use-this-know-how">How to use this know-how</h3><ul><li>Clone repository <a href="https://github.com/DeXP/nuklear_cross">https://github.com/DeXP/nuklear_cross</a> into your project<li>Include “nuklear_cross/nuklear_cross.h”, use functions from there</ul><h3 id="conclusion">Conclusion</h3><p>The application looks a little different on different operating systems. However, the differences are insignificant, the result satisfied me. Nuklear is not in the category “I’m sure it will work everywhere and without testing.” But it is in the category “If that is necessary - I can easily finish it”.<h3 id="useful-links">Useful links</h3><ul><li><a href="http://localhost:4000/tools/dxbin2h/">dxBin2h</a> (<a href="https://github.com/DeXP/dxBin2h">GitHub</a>)<li><a href="https://github.com/vurtun/nuklear">Nuklear on GitHub</a><li><a href="https://dexp.github.io/nuklear-webdemo/">Nuklear webdemo</a><li><a href="https://github.com/vurtun/nuklear/commits?author=DeXP">List of my edits for the correct working of the GDI+ driver</a><li><a href="https://www.gamedev.net/forums/topic/669332-immediate-mode-gui-toolkit/">Theme at the GameDev forum, where Nuklear was announced</a><li><a href="https://gamedev.stackexchange.com/questions/24103/immediate-gui-yae-or-nay">Discussion “Immediate GUI - yae or nay?”</a><li><a href="https://eliasdaler.wordpress.com/2016/05/31/imgui-sfml-tutorial-part-1/">Example of creating applications on ImGUI</a></ul><p class="t30 button radius"><a href="https://habrahabr.ru/post/319106/">This article in Russian ›</a><h2 class="t60" id="other-articles">Other Articles</h2><ul class="side-nav"><li><a href="http://localhost:4000/articles/civetwebview/">GUI &middot; <strong>Tiny desktop GUI application in PHP - 2 MB is enough</strong></a><li><a href="http://localhost:4000/articles/best-nintendo-switch-games/">Gaming &middot; <strong>Best Nintendo Switch games</strong></a><li><a href="http://localhost:4000/articles/nuklear-cross/">GUI &middot; <strong>Nuklear+ — tiny crossplatform GUI</strong></a><li><a href="http://localhost:4000/articles/advanced-jekyll/">Static site creation &middot; <strong>Advanced Jekyll</strong></a><li><a href="http://localhost:4000/articles/read-tar-in-26-lines/">Low level programming &middot; <strong>Read TAR-file in 26 lines of Ansi-C code</strong></a></ul></div><div id="page-meta" class="t30"><p> <time class="icon-calendar pr20" datetime="2017-01-09T00:00:00-07:00" itemprop="datePublished"> 2017-01-09</time> <span class="icon-archive pr20"> ARTICLES</span> <br /> <span class="pr20"><span class="icon-price-tag pr10"> articles</span> <span class="icon-price-tag pr10"> linux</span> <span class="icon-price-tag pr10"> c</span> <span class="icon-price-tag pr10"> gui</span> <span class="icon-price-tag pr10"> tiny</span> <span class="icon-price-tag pr10"> nuklear</span> <span class="icon-price-tag pr10"> opengl</span> </span><div id="post-nav" class="row"><div class="small-5 columns"><a class="button small radius prev" href="http://localhost:4000/tools/dxbin2h/">&laquo; dxBin2h</a></div><div class="small-2 columns text-center"><a class="radius button small" href="http://localhost:4000/blog/archive/" title="Blog Archive">Archive</a></div><div class="small-5 columns text-right"><a class="button small radius next" href="http://localhost:4000/articles/read-tar-in-26-lines/">Read TAR-file in 26 lines of Ansi-C code &raquo;</a></div></div></div><section class="comments"><div class="constrain--body"><div class="comments__existing js-comments"><h3 id="comments" class="t60">Dialogue &amp; Discussion</h3><article id="comment1"> <img class=" left" width="100" height="100" src="https://www.gravatar.com/avatar/115e7ceb5443391e6e84346a18e54ecb?d=mm&s=100"><div><h3> TonyD</h3><p> <a href="#comment1"> Sunday, March 4th, 2018, 09.38am </a><div><p>It took me a while to realize what nuklear is.<p>Most graphics libraries try to provide a portable interface for the application developer - so your sdl or gl code can be highly portable. But nuklear doesn’t do that. Instead, nuklear tries to make the library itself easy to port to different display devices - at the cost to having zero portability for the application developer. So nuklear is really something optimized for developers to use with custom output devices - since you can customize it for your output device. It is also quite small - and that is a major benefit for those doing embedded work.<p>For the typical programmer with access to a graphics library, it is hard to see any benefit to using nuklear. (I’m investigating using it for a resource constrained application - where size matters a lot.)</div></div></article><article id="comment2"> <img class=" left" width="100" height="100" src="https://www.gravatar.com/avatar/39c72569abace3705cfaab61cf594d0b?d=mm&s=100"><div><h3> RDRush</h3><p> <a href="#comment2"> Tuesday, November 20th, 2018, 12.11am </a><div><p>Agree that Nuklear is optimal for small form factors requiring or simply benefiting from a GUI, but the library being small and providing most all common controls in a single package make GUI development very simplified. This level of simplification at a cost of a single header file is cost effective and easily maintainable; as was stated in the article, the majority of time may now be directed at developing the graphic interface rather than the setup and implementation associated with some and being capable of integration with SDL2 and OpenGL with almost no effort is definitely a bonus considering cross-platform, including mobile, development. It, Nuklear, is certainly versatile and could be used in applications as well as games allowing a stronger focus on brand and availability.<p>Excellent introduction and demonstration concerning Nuklear!</div></div></article><article id="comment3"> <img class=" left" width="100" height="100" src="https://www.gravatar.com/avatar/a7ced3a61ce474cd66b8675b2b1a8d80?d=mm&s=100"><div><h3> rt2</h3><p> <a href="#comment3"> Friday, February 15th, 2019, 10.06am </a><div><p>How draw directly on window? can You add simple example to draw polygon with hole or other primitives (line, rectangle etc.) big window inside main windo is not good idea. any click outside and losting every windows</div></div></article><article id="comment4"> <img class=" left" width="100" height="100" src="https://www.gravatar.com/avatar/a713c94ab63e4e5184f87dcd7f0f2471?d=mm&s=100"><div><h3> <a rel="nofollow" href="https://dexp.in">DeXPeriX</a></h3><p> <a href="#comment4"> Monday, February 18th, 2019, 11.37am </a><div><p>rt2, you can use drawing backend (OpenGL for example) to draw something on the scene. The article is not about that, but about Nuklear. I do not feel myself advanced enough to write an OpenGL tutorial. But you can google ones. Your OpenGL code will be somewhere nearby clearing the scene with the color.</div></div></article></div><h2 class="comments__heading heading-2">Leave a comment</h2><form id="post-new-comment" class="form" action="https://api.staticman.net/v2/entry/DeXP/dexp.github.io/master/comments" method="post"> <input type="hidden" name="options[slug]" value="articles-nuklear-intro"> <input type="hidden" name="options[parent]" value="articles-nuklear-intro"> <input type="hidden" name="options[origin]" value="http://localhost:4000/articles/nuklear-intro/"> <input type="hidden" name="options[redirect]" value="http://localhost:4000/articles/nuklear-intro/"> <input type="text" name="company" class="text-field" style="display: none"> <input class="form__field text-field" type="text" name="fields[name]" placeholder="Name" required/> <input class="form__field text-field" type="email" name="fields[email]" placeholder="Email address (will not be public; for avatar only)" required/> <input class="form__field text-field" type="url" name="fields[url]" placeholder="Website (optional)"/> <input class="form__field text-field" type="address" name="fields[address]" placeholder="Address (do not fill!)" style="display: none"/> <textarea class="form__field text-field" rows="10" name="fields[message]" placeholder="Comment. Markdown is accepted." required></textarea> <input class="large radius button" type="submit" value="Send" /> (after comment you will be redirected back here) </form></div></section></article></div></div><div id="up-to-top" class="row"><div class="small-12 columns" style="text-align: right;"> <a class="fontel-16 icon-chevron_up" href="#top-of-page"></a></div></div><footer id="footer-content" class="bg-grau"><div id="footer"><div class="row"><div class="medium-6 large-5 columns"><h5 class="shadow-black">About This Site</h5><p class="shadow-black"> This is the home of the Arizona Jugger League, LLC. We strive to create fun, competitive Jugger tournaments! <a href="http://localhost:4000/about/">More ›</a></div><div class="small-6 medium-3 large-3 large-offset-1 columns"><h5 class="shadow-black">Services</h5><ul class="no-bullet shadow-black"><li > <a href="http://localhost:4000" title=""></a><li > <a href="http://localhost:4000/feed.xml" title="Subscribe to RSS Feed">RSS</a><li > <a href="http://localhost:4000/atom.xml" title="Subscribe to Atom Feed">Atom</a><li > <a href="http://localhost:4000/sitemap.xml" title="Sitemap for Google Webmaster Tools">sitemap.xml</a></ul></div><div class="small-6 medium-3 large-3 columns"><h5 class="shadow-black">Useful links</h5><ul class="no-bullet shadow-black"><li > <a href="http://localhost:4000" title=""></a><li class="rss-link" > <a href="http://phlow.de/" target="_blank" title="Theme author">Phlow</a><li class="sitemap-link" > <a href="http://phlow.github.io/feeling-responsive/" target="_blank" title="Theme link">Feeling Responsive</a><li class="services-newsletter" > <a href="http://foundation.zurb.com/" target="_blank" title="Built on Foundation">Built on Foundation</a></ul></div></div></div><div id="subfooter"><nav class="row"><section id="subfooter-left" class="small-12 medium-6 columns credits"><p>© Arizona Jugger League, LLC (2025)</section><section id="subfooter-right" class="small-12 medium-6 columns"><ul class="inline-list social-icons"><li><a href="http://github.com/dexp" target="_blank" class="icon-github_alt" title="GitHub"></a><li><a href="https://www.linkedin.com/in/dexperix/" target="_blank" class="icon-linkedin" title="LinkedIn"></a><li><a href="http://steamcommunity.com/id/dexp" target="_blank" class="icon-steam" title="Steam"></a><li><a href="https://vk.com/dexperix" target="_blank" class="icon-vk" title="VKontakte"></a><li><a href="https://www.facebook.com/dexperix" target="_blank" class="icon-facebook" title="Facebook"></a><li><a href="skype:dexperix?chat" target="_blank" class="icon-skype" title="Skype"></a><li><a href="https://t.me/DeXPeriX" target="_blank" class="icon-telegram" title="Telegram"></a></ul></section></nav></div></footer><script src="http://localhost:4000/assets/js/javascript.min.js"></script> <script> $("#masthead").backstretch("/images/other/nk/nuklear-header.png", {fade: 700}); $("#masthead-with-text").backstretch("/images/other/nk/nuklear-header.png", {fade: 700}); </script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-103240598-1', 'auto'); ga('set', 'anonymizeIp', true); ga('send', 'pageview'); </script>
